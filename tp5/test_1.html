<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>test_1</title>
    <script>
    	var pos = 0;
		var timer;
		var canvas = document.createElement('canvas');
		var context = canvas.getContext('2d');
		var dir = 'droite';
		
		function init() {
			canvas.width = 500;
			document.body.appendChild(canvas);
			context.fillStyle = 'red';
			context.fillRect(10, 10, 50, 50);
			// Move the element 10px on the right every 16ms
			timer = setInterval(function() {
				//temporisation pour simuler du calcul
				pausecomp(1000);
				context.clearRect(pos, 10, 50, 50);
				if (dir === 'droite') {
					pos+=10;
					if (pos+100 >= 500) { dir = 'gauche' }
				} else {
					pos-=10;
					if (pos <= 0) { dir = 'droite' }
				}
				context.fillRect(pos, 10, 50, 50);
			}, 16);
		}
		
		function pausecomp(millis) {
			var date = new Date();
			var curDate = null;
			do { 
				curDate = new Date(); 
			} while(curDate-date < millis);
		} 
    </script>
  </head>
  <body onload='init()'>
    <!-- page content -->
  </body>
</html>
