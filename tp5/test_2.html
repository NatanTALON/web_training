<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <title>test_2</title>
    <script>
    	var pos = 0;
		var timer;
		var canvas = document.createElement('canvas');
		var context = canvas.getContext('2d');
		var dir = 'droite';
		var date;
		
		function init() {
			canvas.width = 1000;
			document.body.appendChild(canvas);
			context.fillStyle = 'red';
			// Move the element 10px on the right every 16ms
			timer = setInterval(function() {
				date = new Date();
				//temporisation pour simuler du calcul
				pausecomp(10);
				context.clearRect(pos, 10, 50, 50);
				var newDate = new Date();
				if (dir === 'droite') {
					pos+=newDate-date;
					if (pos+100 >= 500) { dir = 'gauche' }
				} else {
					pos-=newDate-date;
					if (pos <= 0) { dir = 'droite' }
				}
				context.fillRect(pos, 10, 50, 50);
			}, 10);
		}
		
		function pausecomp(millis) {
			var date = new Date();
			var curDate = null;
			do { 
				curDate = new Date(); 
			} while(curDate-date < millis);
		} 
    </script>
  </head>
  <body onload='init()'>
    <!-- page content -->
  </body>
</html>
